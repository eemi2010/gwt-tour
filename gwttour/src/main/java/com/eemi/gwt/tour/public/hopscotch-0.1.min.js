(function(v,w){var B,x,C,D,y,E=window.Sizzle||null,b,s,p,q,k=v[w],F=!1,G="undefined"!==typeof window.jQuery,t="undefined"!==typeof window.sessionStorage,h=window.document;q={smoothScroll:!0,scrollDuration:1E3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!0,cookieName:"hopscotch.tour.state"};k||(Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),b={addClass:function(a,
b){var c,f,d,i;if(a.className){f=b.split(/\s+/);c=" "+a.className+" ";d=0;for(i=f.length;d<i;++d)0>c.indexOf(" "+f[d]+" ")&&(c+=f[d]+" ");a.className=c.replace(/^\s+|\s+$/g,"")}else a.className=b},removeClass:function(a,b){var c,f,d,i;f=b.split(/\s+/);c=" "+a.className+" ";d=0;for(i=f.length;d<i;++d)c=c.replace(" "+f[d]+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")},getPixelValue:function(a){var b=typeof a;return"number"===b?a:"string"===b?parseInt(a,10):0},valOrDefault:function(a,b){return"undefined"!==
typeof a?a:b},invokeCallbackArrayHelper:function(a){var b;Array.isArray(a)&&(b=p[a[0]],"function"===typeof b&&b.apply(this,a.slice(1)))},invokeCallbackArray:function(a){var e,c;if(Array.isArray(a))if("string"===typeof a[0])b.invokeCallbackArrayHelper(a);else{e=0;for(c=a.length;e<c;++e)b.invokeCallback(a[e])}},invokeCallback:function(a){"function"===typeof a&&a();if("string"===typeof a&&p[a])p[a]();else b.invokeCallbackArray(a)},invokeEventCallbacks:function(a,b){var c=s[a],f,d;b&&this.invokeCallback(b);
f=0;for(d=c.length;f<d;++f)this.invokeCallback(c[f].cb)},getScrollTop:function(){return"undefined"!==typeof window.pageYOffset?window.pageYOffset:h.documentElement.scrollTop},getScrollLeft:function(){return"undefined"!==typeof window.pageXOffset?window.pageXOffset:h.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||h.documentElement.clientHeight},getWindowWidth:function(){return window.innerWidth||h.documentElement.clientWidth},addEvtListener:function(a,b,c){return a.addEventListener?
a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},removeEvtListener:function(a,b,c){return a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},documentIsReady:function(){return"complete"===h.readyState||"interactive"===h.readyState},evtPreventDefault:function(a){a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)},extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},getStepTargetHelper:function(a){return/^[#\.]/.test(a)?h.querySelector?h.querySelector(a):
G?(a=jQuery(a),a.length?a[0]:null):E?(a=new E(a),a.length?a[0]:null):/^#[a-zA-Z][\w-_:.]*$/.test(a)?h.getElementById(a.substring(1)):null:h.getElementById(a)},getStepTarget:function(a){var e;if(!a||!a.target)return null;if("string"===typeof a.target)a.target=b.getStepTargetHelper(a.target);else if(Array.isArray(a.target)){var c,f;c=0;for(f=a.target.length;c<f;c++)if("string"===typeof a.target[c]&&(e=b.getStepTargetHelper(a.target[c])))return a.target=e;return null}return a.target},getI18NString:function(a){return y[a]||
D[a]},setState:function(a,b,c){var f="";t?sessionStorage.setItem(a,b):(c&&(f=new Date,f.setTime(f.getTime()+864E5*c),f="; expires="+f.toGMTString()),h.cookie=a+"="+b+f+"; path=/")},getState:function(a){var b=a+"=",c=h.cookie.split(";"),f,d;if(t)d=sessionStorage.getItem(a);else for(a=0;a<c.length;a++){for(f=c[a];" "===f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(b)){d=f.substring(b.length,f.length);break}}return d},clearState:function(a){t?sessionStorage.removeItem(a):this.setState(a,"",
-1)}},b.addEvtListener(window,"load",function(){F&&k.startTour()}),s={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},p={},D={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},y={},x=function(a){this.init(a)},x.prototype={isShowing:!1,currStep:void 0,_createButton:function(a,e){var c=h.createElement("button"),f="hopscotch-nav-button";c.id=a;e&&(c.innerHTML=e);f=0<=a.indexOf("prev")?f+" prev":f+" next";b.addClass(c,f);return c},setPosition:function(a){var e,
c,f,d,i,g,h;d=b.getStepTarget(a);var m=this.element,n=this.arrowEl;e=b.getPixelValue(a.width)||this.opt.bubbleWidth;f=b.valOrDefault(a.padding,this.opt.bubblePadding);b.removeClass(m,"fade-in-down fade-in-up fade-in-left fade-in-right");!a.placement&&a.orientation&&(a.placement=a.orientation);d=d.getBoundingClientRect();"top"===a.placement?(c=m.offsetHeight,i=d.top-c-this.opt.arrowWidth,g=d.left):"bottom"===a.placement?(i=d.bottom+this.opt.arrowWidth,g=d.left):"left"===a.placement?(i=d.top,g=d.left-
e-2*f-12-this.opt.arrowWidth):"right"===a.placement&&(i=d.top,g=d.right+this.opt.arrowWidth);if(h="center"!==a.arrowOffset?b.getPixelValue(a.arrowOffset):a.arrowOffset)if("top"===a.placement||"bottom"===a.placement)n.style.top="",n.style.left="center"===h?e/2+f-n.getBoundingClientRect().width/2+"px":h+"px";else{if("left"===a.placement||"right"===a.placement)n.style.left="","center"===h?(c=c||m.offsetHeight,n.style.top=c/2+f-n.getBoundingClientRect().height/2+"px"):n.style.top=h+"px"}else n.style.top=
"",n.style.left="";g="center"===a.xOffset?d.left+d.width/2-e/2-f:g+b.getPixelValue(a.xOffset);"center"===a.yOffset?(c=c||m.offsetHeight,i=d.top+d.height/2-c/2-f):i+=b.getPixelValue(a.yOffset);a.fixedElement||(i+=b.getScrollTop(),g+=b.getScrollLeft());m.style.position=a.fixedElement?"fixed":"absolute";m.style.top=i+"px";m.style.left=g+"px"},_initNavButtons:function(){var a=h.createElement("div");this.prevBtnEl=this._createButton("hopscotch-prev",b.getI18NString("prevBtn"));this.nextBtnEl=this._createButton("hopscotch-next",
b.getI18NString("nextBtn"));this.doneBtnEl=this._createButton("hopscotch-done",b.getI18NString("doneBtn"));this.ctaBtnEl=this._createButton("hopscotch-cta");b.addClass(this.doneBtnEl,"hide");a.appendChild(this.prevBtnEl);a.appendChild(this.ctaBtnEl);a.appendChild(this.nextBtnEl);a.appendChild(this.doneBtnEl);b.addEvtListener(this.prevBtnEl,"click",function(){k.prevStep(!0)});b.addEvtListener(this.nextBtnEl,"click",function(){k.nextStep(!0)});b.addEvtListener(this.doneBtnEl,"click",function(){k.endTour()});
a.className="hopscotch-actions";this.buttonsEl=a;this.containerEl.appendChild(a);return this},_getCloseFn:function(){var a=this;this.closeFn||(this.closeFn=function(e){a.opt.onClose&&b.invokeCallback(a.opt.onClose);a.opt.id&&!a.opt.isTourBubble?k.getCalloutManager().removeCallout(a.opt.id):a.destroy();b.evtPreventDefault(e)});return this.closeFn},initCloseButton:function(){var a=h.createElement("a");a.className="hopscotch-bubble-close";a.href="#";a.title=b.getI18NString("closeTooltip");a.innerHTML=
b.getI18NString("closeTooltip");this.opt.isTourBubble?b.addEvtListener(a,"click",function(a){var c=k.getCurrStepNum(),f=k.getCurrTour(),c=c===f.steps.length-1;b.invokeEventCallbacks("close");k.endTour(!0,c);a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)}):b.addEvtListener(a,"click",this._getCloseFn());b.valOrDefault(this.opt.showCloseButton,!0)||b.addClass(a,"hide");this.closeBtnEl=a;this.containerEl.appendChild(a);return this},_initArrow:function(){var a,b;this.arrowEl=h.createElement("div");
this.arrowEl.className="hopscotch-bubble-arrow-container";b=h.createElement("div");b.className="hopscotch-bubble-arrow-border";a=h.createElement("div");a.className="hopscotch-bubble-arrow";this.arrowEl.appendChild(b);this.arrowEl.appendChild(a);this.element.appendChild(this.arrowEl);return this},_setupCTAButton:function(a){var e,c=this;this._showButton(this.ctaBtnEl,!!a.showCTAButton);a.showCTAButton&&a.ctaLabel&&(this.ctaBtnEl.innerHTML=a.ctaLabel,e=function(){b.removeEvtListener(c.ctaBtnEl,"click",
e);c.opt.isTourBubble||k.getCalloutManager().removeCallout(a.id);if(a.onCTA&&"function"===typeof a.onCTA)a.onCTA()},b.addEvtListener(this.ctaBtnEl,"click",e))},render:function(a,e,c,f){var d=this.element,i,g;a?this.currStep=a:this.currStep&&(a=this.currStep);!a.placement&&a.orientation&&(a.placement=a.orientation);i=b.valOrDefault(a.showNextButton,this.opt.showNextButton);g=b.valOrDefault(a.showPrevButton,this.opt.showPrevButton);this.setTitle(a.title||"");this.setContent(a.content||"");this.opt.isTourBubble&&
this.setNum(e);this.placement=a.placement;this.showPrevButton(this.prevBtnEl&&g&&0<e);this.showNextButton(this.nextBtnEl&&i&&!c);this.nextBtnEl.innerHTML=a.showSkip?b.getI18NString("skipBtn"):b.getI18NString("nextBtn");c?b.removeClass(this.doneBtnEl,"hide"):b.addClass(this.doneBtnEl,"hide");this._setupCTAButton(a);this._setArrow(a.placement);e=b.getPixelValue(a.width)||this.opt.bubbleWidth;c=b.valOrDefault(a.padding,this.opt.bubblePadding);this.containerEl.style.width=e+"px";this.containerEl.style.padding=
c+"px";d.style.zIndex=a.zindex||"";"top"===a.placement?(d.style.top="-9999px",d.style.left="-9999px",b.removeClass(d,"hide"),this.setPosition(a),b.addClass(d,"hide")):this.setPosition(a);f&&f(!a.fixedElement);return this},setTitle:function(a){a?(this.titleEl.innerHTML=a,b.removeClass(this.titleEl,"hide")):b.addClass(this.titleEl,"hide");return this},setContent:function(a){a?(this.contentEl.innerHTML=a,b.removeClass(this.contentEl,"hide")):b.addClass(this.contentEl,"hide");return this},setNum:function(a){var e=
b.getI18NString("stepNums"),a=e&&a<e.length?e[a]:a+1;this.numberEl.innerHTML=a},_setArrow:function(a){b.removeClass(this.arrowEl,"down up right left");"top"===a?b.addClass(this.arrowEl,"down"):"bottom"===a?b.addClass(this.arrowEl,"up"):"left"===a?b.addClass(this.arrowEl,"right"):"right"===a&&b.addClass(this.arrowEl,"left")},_getArrowDirection:function(){if("top"===this.placement)return"down";if("bottom"===this.placement)return"up";if("left"===this.placement)return"right";if("right"===this.placement)return"left"},
show:function(){var a=this,e="fade-in-"+this._getArrowDirection();b.removeClass(this.element,"hide");b.addClass(this.element,e);setTimeout(function(){b.removeClass(a.element,"invisible")},50);setTimeout(function(){b.removeClass(a.element,e)},1E3);this.isShowing=!0;return this},hide:function(a){var e=this.element,a=b.valOrDefault(a,!0);e.style.top="";e.style.left="";a?(b.addClass(e,"hide"),b.removeClass(e,"invisible")):(b.removeClass(e,"hide"),b.addClass(e,"invisible"));b.removeClass(e,"animate fade-in-up fade-in-down fade-in-right fade-in-left");
this.isShowing=!1;return this},_showButton:function(a,e,c){var f="hide";c&&(f="hide-all");"undefined"===typeof e&&(e=!0);e?b.removeClass(a,f):b.addClass(a,f)},showPrevButton:function(a){this._showButton(this.prevBtnEl,a)},showNextButton:function(a){this._showButton(this.nextBtnEl,a)},showCloseButton:function(a){this._showButton(this.closeBtnEl,a)},destroy:function(){var a=this.element;a&&a.parentNode.removeChild(a);this.closeBtnEl&&b.removeEvtListener(this.closeBtnEl,"click",this._getCloseFn());this.ctaBtnEl&&
this.onCTA&&b.removeEvtListener(this.ctaBtnEl,"click",this.onCTA)},updateButtons:function(){this.showPrevButton(this.opt.showPrevButton);this.showNextButton(this.opt.showNextButton);this.showCloseButton(this.opt.showCloseButton);this.prevBtnEl.innerHTML=b.getI18NString("prevBtn");this.nextBtnEl.innerHTML=b.getI18NString("nextBtn");this.doneBtnEl.innerHTML=b.getI18NString("doneBtn")},init:function(a){var e=h.createElement("div"),c=h.createElement("div"),f=h.createElement("div"),d=this,i=!1,g,k;this.element=
e;this.containerEl=c;this.titleEl=h.createElement("h3");this.contentEl=h.createElement("div");b.addClass(this.titleEl,"hopscotch-title");b.addClass(this.contentEl,"hopscotch-content");k={showPrevButton:q.showPrevButton,showNextButton:q.showNextButton,bubbleWidth:q.bubbleWidth,bubblePadding:q.bubblePadding,arrowWidth:q.arrowWidth,showNumber:!0,isTourBubble:!0};a="undefined"===typeof a?{}:a;b.extend(k,a);this.opt=k;e.className="hopscotch-bubble animated";c.className="hopscotch-bubble-container";k.isTourBubble||
(e.className+=" hopscotch-callout");k.isTourBubble?(this.numberEl=h.createElement("span"),this.numberEl.className="hopscotch-bubble-number",c.appendChild(this.numberEl)):b.addClass(e,"no-number");f.appendChild(this.titleEl);f.appendChild(this.contentEl);f.className="hopscotch-bubble-content";c.appendChild(f);e.appendChild(c);this._initNavButtons();this.initCloseButton();this._initArrow();b.addEvtListener(window,"resize",function(){!i&&d.isShowing&&(i=!0,setTimeout(function(){d.setPosition(d.currStep);
i=!1},100))});this.hide();b.documentIsReady()?h.body.appendChild(e):(h.addEventListener?(g=function(){h.removeEventListener("DOMContentLoaded",g);window.removeEventListener("load",g);h.body.appendChild(e)},h.addEventListener("DOMContentLoaded",g,!1)):(g=function(){"complete"===h.readyState&&(h.detachEvent("onreadystatechange",g),window.detachEvent("onload",g),h.body.appendChild(e))},h.attachEvent("onreadystatechange",g)),b.addEvtListener(window,"load",g))}},C=function(){var a={};this.createCallout=
function(b){var c;if(b.id){if(a[b.id])throw"Callout by that id already exists. Please choose a unique id.";b.showNextButton=b.showPrevButton=!1;b.isTourBubble=!1;c=new x(b);a[b.id]=c;b.target&&c.render(b,null,null,function(){c.show()})}else throw"Must specify a callout id.";return c};this.getCallout=function(b){return a[b]};this.removeAllCallouts=function(){for(var b in a)a.hasOwnProperty(b)&&this.removeCallout(b)};this.removeCallout=function(b){var c=a[b];a[b]=null;c&&c.destroy()}},B=function(a){var e=
this,c,f,d,i,g,k,m,n,u=function(a){c||(c=new x(d));a&&(b.extend(c.opt,{bubblePadding:l("bubblePadding"),bubbleWidth:l("bubbleWidth"),showNextButton:l("showNextButton"),showPrevButton:l("showPrevButton"),showCloseButton:l("showCloseButton"),arrowWidth:l("arrowWidth")}),c.updateButtons());return c},l=function(a){return"undefined"===typeof d?q[a]:b.valOrDefault(d[a],q[a])},r=function(){return 0>g||g>=i.steps.length?null:i.steps[g]},t=function(){e.nextStep(!1)},A=function(a,c){var f,e,d;0<=g+a&&g+a<i.steps.length?
(g+=a,e=r(),d=function(){(f=b.getStepTarget(e))?c(g):(b.invokeEventCallbacks("error"),A(a,c))},e.delay?setTimeout(d,e.delay):d()):c(-1)},v=function(a,c){var f=this,e,d,h,j;u().hide();a=b.valOrDefault(a,!0);d=e=r();h=0<c?d.multipage:0<g&&i.steps[g-1].multipage;j=function(e){if(-1===e)return this.endTour(!0);if(a&&(0<c?b.invokeEventCallbacks("next",d.onNext):b.invokeEventCallbacks("prev",d.onPrev),h))return;this.showStep(e)};if(!h&&l("skipIfNoElement"))A(c,function(a){j.call(f,a)});else if(0<=g+c&&
g+c<i.steps.length){g+=c;e=r();if(!b.getStepTarget(e)&&!h)return b.invokeEventCallbacks("error"),this.endTour(!0,!1);j.call(this,g)}return this},w=function(a){var c=i.steps[a],e=i.steps.length,f=i.id+":"+a,d=u(),k=b.getStepTarget(c),j;j=function(){d.show();b.invokeEventCallbacks("show",c.onShow)};g=a;d.hide(!1);d.render(c,a,a===e-1,function(a){if(a){var e=u().element,a=b.getPixelValue(e.style.top),e=a+b.getPixelValue(e.offsetHeight),f=b.getStepTarget(r()).getBoundingClientRect(),d=f.top+b.getScrollTop(),
f=f.bottom+b.getScrollTop(),a=a<d?a:d,e=e>f?e:f,d=b.getScrollTop(),f=d+b.getWindowHeight(),g=a-l("scrollTopMargin"),i,H,z;a>=d&&(a<=d+l("scrollTopMargin")||e<=f)?j&&j():l("smoothScroll")?"undefined"!==typeof YAHOO&&"undefined"!==typeof YAHOO.env&&"undefined"!==typeof YAHOO.env.ua&&"undefined"!==typeof YAHOO.util&&"undefined"!==typeof YAHOO.util.Scroll?(a=YAHOO.env.ua.webkit?h.body:h.documentElement,e=YAHOO.util.Easing?YAHOO.util.Easing.easeOut:void 0,a=new YAHOO.util.Scroll(a,{scroll:{to:[0,g]}},
l("scrollDuration")/1E3,e),a.onComplete.subscribe(j),a.animate()):G?$("body, html").animate({scrollTop:g},l("scrollDuration"),j):(0>g&&(g=0),i=d>a?-1:1,H=Math.abs(d-g)/(l("scrollDuration")/10),z=function(){var a=b.getScrollTop(),c=a+i*H;0<i&&c>=g||0>i&&c<=g?(c=g,j&&j(),window.scrollTo(0,c)):(window.scrollTo(0,c),b.getScrollTop()===a?j&&j():setTimeout(z,10))},z()):(window.scrollTo(0,g),j&&j())}else j();c.nextOnTargetClick&&b.addEvtListener(k,"click",t)});c.multipage&&(f+=":mp");b.setState(l("cookieName"),
f,1)};this.getCalloutManager=function(){"undefined"===typeof f&&(f=new C);return f};this.startTour=function(a,c){var e,f=this;if(!i){i=a;var d={},h;for(h in a)a.hasOwnProperty(h)&&("id"!==h&&"steps"!==h)&&(d[h]=a[h]);n.call(this,d,!0);if(d=b.getState(l("cookieName")))d=d.split(":"),k=d[0],m=d[1],m=parseInt(m,10),2<d.length&&"mp"===d[2]&&m<i.steps.length-1&&++m}if("undefined"!==typeof c){if(c>=i.steps.length)throw"Specified step number out of bounds.";g=c}if(!b.documentIsReady())return F=!0,this;!g&&
i.id===k&&"undefined"!==typeof m?g=m:g||(g=0);a:{var d=function(a){-1!==a&&b.getStepTarget(i.steps[a])?(b.invokeEventCallbacks("start"),e=u(),e.hide(!1),f.isActive=!0,b.getStepTarget(r())?f.showStep(a):(b.invokeEventCallbacks("error"),l("skipIfNoElement")&&f.nextStep(!1))):f.endTour(!1,!1)},j;h=!1;g=g||0;j=r();if(j=b.getStepTarget(j))d(g);else{if(0<g&&(--g,h=!0,j=r(),j=b.getStepTarget(j))){d(g);break a}j||(b.invokeEventCallbacks("error"),l("skipIfNoElement")?(h&&++g,A(1,d)):(g=-1,d(g)))}}return this};
this.showStep=function(a){var b=i.steps[a];b.delay?setTimeout(function(){w(a)},b.delay):w(a);return this};this.prevStep=function(a){v.call(this,a,-1);return this};this.nextStep=function(a){var c=r(),d=b.getStepTarget(c);c.nextOnTargetClick&&b.removeEvtListener(d,"click",t);v.call(this,a,1);return this};this.endTour=function(a,c){var d=u(),a=b.valOrDefault(a,!0),c=b.valOrDefault(c,!0);g=0;m=void 0;d.hide();a&&b.clearState(l("cookieName"));this.isActive&&(this.isActive=!1,i&&c&&b.invokeEventCallbacks("end"));
this.removeCallbacks(null,!0);this.resetDefaultOptions();i=null;return this};this.getCurrTour=function(){return i};this.getCurrStepNum=function(){return g};this.listen=function(a,b,c){a&&s[a].push({cb:b,fromTour:c});return this};this.unlisten=function(a,b){var c=s[a],d,e;d=0;for(e=c.length;d<e;++d)c[d]===b&&c.splice(d,1);return this};this.removeCallbacks=function(a,b){var c,d,e,f;for(f in s)if(!a||a===f)if(b){c=s[f];d=0;for(e=c.length;d<e;++d)c[d].fromTour&&(c.splice(d--,1),--e)}else s[f]=[];return this};
this.registerHelper=function(a,b){"string"===typeof a&&"function"===typeof b&&(p[a]=b)};this.unregisterHelper=function(a){p[a]=null};this.invokeHelper=function(a){var b=[],c,d;c=1;for(d=arguments.length;c<d;++c)b.push(arguments[c]);p[a]&&p[a].call(null,b)};this.setCookieName=function(a){d.cookieName=a;return this};this.resetDefaultOptions=function(){d={};return this};this.resetDefaultI18N=function(){y={};return this};this.getState=function(){return b.getState(l("cookieName"))};n=function(a,c){var e=
"next prev start end show error close".split(" "),f,g,h;d||this.resetDefaultOptions();b.extend(d,a);a&&b.extend(y,a.i18n);g=0;for(h=e.length;g<h;++g)f="on"+e[g].charAt(0).toUpperCase()+e[g].substring(1),a[f]&&this.listen(e[g],a[f],c);u(!0);return this};this.configure=function(a){return n.call(this,a,!1)};a&&this.configure(a)},k=new B,v[w]=k)})(window,"hopscotch");
